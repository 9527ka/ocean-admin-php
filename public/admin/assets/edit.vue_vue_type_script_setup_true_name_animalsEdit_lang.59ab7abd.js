import{C as T,D as G,G as L,H as N,F as O}from"./element-plus.f96e9a80.js";import{_ as P}from"./index.vue_vue_type_style_index_0_lang.343f3b36.js";import{_ as S}from"./picker.a6dda4da.js";import{P as j}from"./index.ff756fc3.js";import{r as m}from"./index.91627cac.js";import{d as E,s as g,r as H,b as M,a0 as b,o as c,c as V,W as u,O as n,u as a,V as W,a7 as $,M as z,T as J,U as K}from"./@vue.4b2a3026.js";import"./lodash.d6bb5e00.js";function re(o){return m.get({url:"/animals/lists",params:o})}function Q(o){return m.post({url:"/animals/add",params:o})}function X(o){return m.post({url:"/animals/edit",params:o})}function ie(o){return m.post({url:"/animals/delete",params:o})}function Y(o){return m.get({url:"/animals/detail",params:o})}const Z={class:"edit-popup"},ee=E({name:"animalsEdit"}),me=E({...ee,props:{dictData:{type:Object,default:()=>({})}},emits:["success","close"],setup(o,{expose:B,emit:v}){const _=v,f=g(),d=g(),p=H("add"),y=M(()=>p.value=="edit"?"\u7F16\u8F91\u52A8\u7269\u8868":"\u65B0\u589E\u52A8\u7269\u8868"),t=b({id:"",title:"",desc:"",is_recommend:"",image:"",content:""}),A=b({title:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898",trigger:["blur"]}],desc:[{required:!0,message:"\u8BF7\u8F93\u5165\u6982\u8FF0",trigger:["blur"]}],is_recommend:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u63A8\u8350",trigger:["blur"]}],image:[{required:!0,message:"\u8BF7\u9009\u62E9\u56FE\u7247",trigger:["blur"]}]}),F=async s=>{for(const e in t)s[e]!=null&&s[e]!=null&&(t[e]=s[e])},w=async s=>{const e=await Y({id:s.id});F(e)},x=async()=>{var e,r;await((e=f.value)==null?void 0:e.validate());const s={...t};p.value=="edit"?await X(s):await Q(s),(r=d.value)==null||r.close(),_("success")},D=(s="add")=>{var e;p.value=s,(e=d.value)==null||e.open()},k=()=>{_("close")};return B({open:D,setFormData:F,getDetail:w}),(s,e)=>{const r=T,i=G,R=S,C=P,U=L,q=N,h=O;return c(),V("div",Z,[u(j,{ref_key:"popupRef",ref:d,title:a(y),async:!0,width:"80%",onConfirm:x,onClose:k},{default:n(()=>[u(h,{ref_key:"formRef",ref:f,model:a(t),"label-width":"90px",rules:a(A)},{default:n(()=>[u(i,{label:"\u6807\u9898",prop:"title"},{default:n(()=>[u(r,{modelValue:a(t).title,"onUpdate:modelValue":e[0]||(e[0]=l=>a(t).title=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u6982\u8FF0",prop:"desc"},{default:n(()=>[u(r,{class:"flex-1",modelValue:a(t).desc,"onUpdate:modelValue":e[1]||(e[1]=l=>a(t).desc=l),type:"textarea",rows:"4",clearable:"",placeholder:"\u8BF7\u8F93\u5165\u6982\u8FF0"},null,8,["modelValue"])]),_:1}),u(i,{label:"\u56FE\u7247",prop:"image"},{default:n(()=>[u(R,{modelValue:a(t).image,"onUpdate:modelValue":e[2]||(e[2]=l=>a(t).image=l)},null,8,["modelValue"])]),_:1}),u(i,{label:"\u5185\u5BB9",prop:"content"},{default:n(()=>[u(C,{class:"flex-1",modelValue:a(t).content,"onUpdate:modelValue":e[3]||(e[3]=l=>a(t).content=l),height:500},null,8,["modelValue"])]),_:1}),u(i,{label:"\u662F\u5426\u63A8\u8350",prop:"is_recommend"},{default:n(()=>[u(q,{modelValue:a(t).is_recommend,"onUpdate:modelValue":e[4]||(e[4]=l=>a(t).is_recommend=l),placeholder:"\u8BF7\u9009\u62E9\u662F\u5426\u63A8\u8350"},{default:n(()=>[(c(!0),V(W,null,$(o.dictData.is_recommend,(l,I)=>(c(),z(U,{key:I,label:parseInt(l.value)},{default:n(()=>[J(K(l.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title"])])}}});export{me as _,ie as a,re as b};
